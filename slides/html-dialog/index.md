---
marp: true
title: html-dialog
theme: wave
---

# \<dialog /\>を正しく使いこなす

2024/11/15

---

<!--
paginate: true
header: "<dialog />を正しく使いこなす"
-->

# 目次

1. モーダルダイアログとモードレスダイアログ
2. \<dialog /\>の基本的な使い方
3. ダイアログの実装で気をつけること
4. role="dialog"属性との違い

---

<!--
_header: ""
-->

# モーダルダイアログとモードレスダイアログ

---

<!--
header: "モーダルダイアログとモードレスダイアログ"
-->

# 定義

### モーダルダイアログ

- ダイアログが閉じるまで他の操作ができない(操作が制限される)

### モードレスダイアログ

- ダイアログが開いている間も他の操作ができる(操作が制限されない)

モードの有無(特定の機能に制限するか) + ダイアログ(対話的なウィンドウ)

を組み合わせた言葉

---

<!--
モーダルダイアログでは重要な操作の確認やシステム利用に必要な情報の入力などに使うことが多い
モードレスダイアログは、簡単な確認を伴う操作やメール作成(Gmail)などの並列作業のできる操作に使うことが多い

ユーザーの自由度を高く保つためにモードレスダイアログをメインに、必要な場合はモーダルダイアログを採用するとよい
-->

# 主な用途

### モーダルダイアログ

- ユーザーに情報を提供する
- ユーザーに確認を求める
- ユーザーの入力を求める

### モードレスダイアログ

- ユーザーに情報を提供する

---

<!--
_header: ""
-->

# \<dialog /\>の基本的な使い方

---

<!--
header: "<dialog />の基本的な使い方"
-->

# ダイアログの開き方

- `.show()`メソッド
  - モードレスダイアログとして開く
- `.showModal()`メソッド
  - モーダルダイアログとして開く

---

<!--
モーダルダイアログ内にフォームがある場合はmethod="dialog"を設定するのがよさそう
結局JSで操作することが多いのでフォームの機能の説明についてはオマケ
-->

# ダイアログの閉じ方

- `.close()`メソッド
  - ダイアログを閉じる(どちらからも使用可能)
- フォームの送信と連携

```html
<!-- formがmethod="dialog"を保有している場合 -->
<form method="dialog">
  <button type="submit">閉じる</button>
</form>

<!-- 送信ボタンにformmethod="dialog"を設定している場合 -->
<button formmethod="dialog" type="submit">閉じる</button>
```

---

# その他開閉方法(:warning: 非推奨)

`open`属性にブール値を設定

→ `true`のときはモードレスダイアログとして開かれる

---

# ダイアログを使用するメリット

- 【モーダルダイアログ】独自のダイアログ外の操作の制御が不要
  - `::backdrop`を使用して背景のスタイルの設定も簡単に行える
- ユーザビリティ・アクセシビリティの向上
  - 【モーダルダイアログ】`Esc`キーで閉じることができる(モードレスダイアログでは既定では閉じることができない)
- 最上位レイヤーに表示されるため、他の要素による影響を受けにくい
- `returnValue`プロパティを使用してダイアログの結果を取得できる

---

<!--
_header: ""
-->

# ダイアログの実装で気をつけること

---

<!--
header: "ダイアログの実装で気をつけること"
-->

# フォーカス管理

- 常に少なくとも1つのフォーカス可能なコントロールを持つべき
- 開いた際にフォーカスがダイアログ内の要素に移動するようにする
- 閉じた際にフォーカスがダイアログを開いた要素に戻るようにする
- フォーカス可能な要素のタブ順序が折り返される
  - `Tab`キーでフォーカスが移動して最後まで行ったら最初に戻る
- 移動やサイズ変更が可能な場合はキーボードでも可能にする
- メインページとフォーカスを移動するためのショートカットを用意する

---

# アクセシビリティを考慮する

`aria-labelledby`属性や`aria-describedby`属性を使用して、ダイアログのタイトルや説明を提供する

```html
<dialog aria-labelledby="dialog-title" aria-describedby="dialog-description">
  <h2 id="dialog-title">タイトル</h2>
  <p id="dialog-description">説明</p>
  <button class="close">閉じる</button>
</dialog>
```

---

<!--
_header: ""
-->

# role="dialog"属性との違い

---

<!--
dialogを使うメリットの逆になるが、独自で実装するには面倒な機能が多数提供されている

header: "role="dialog"属性との違い"
-->

# 独自で実装しなければならないこと

- `autofocus`属性を指定しないと自動でフォーカスが移動しない
- 背景の操作の制御が必要
- `Esc`キーでのショートカットが必要

などなど...

---

<!--
header: ""
-->

# 参考

- [\<dialog\>: ダイアログ要素 - HTML - MDN Web Docs - Mozilla](https://developer.mozilla.org/ja/docs/Web/HTML/Element/dialog)
- [ARIA: dialog ロール - アクセシビリティ - MDN Web Docs](https://developer.mozilla.org/ja/docs/Web/Accessibility/ARIA/Roles/dialog_role)
- [UIをきちんと考えた実装 - モーダルダイアログ (モーダルウィンドウ)](https://qiita.com/Cloudy_knot/items/47f29b958946a2c53e93)
- [dialog要素を使ってアクセシブルなモーダルを作ってみよう](https://zenn.dev/otacle/articles/124f8fe65528e8)
- [【アクセシビリティ】アクセシビリティを意識したモーダルの作り方](https://qiita.com/degudegu2510/items/acc5d2066ea4baae1e2d)

---

# ご清聴ありがとうございました:pray:

<!--
paginate: false
-->
